<!DOCTYPE html>
<html>
    <head>
        <title>WebSockets - Simple chat</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/jquery.mobile-1.3.1.min.css">
        <link rel="stylesheet" href="css/style.css">
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/jquery.mobile-1.3.1.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script src="./js/jquery.min.js"></script>

        <script src="js/function.js"></script>
        <script src="js/connectionManager.js"></script>
        <script src="js/responseManager.js"></script>
        <script src="js/applicationManager.js"></script>
        <script src="js/sendComandManager.js"></script>


        <style>
            .ui-footer {
                position: absolute;
                bottom: 0;
                width: 100%;
            }

            #chat_input{
                bottom: 0;
                display: block;
                margin: 0 -20px;
                padding: 0;
                position: absolute;
                width: 100%;

            }
            #chat_input .block-button-send{
                float: right;
                width: 90px;
            }
            #chat_input .block-input-send{
                float: right;
                margin: 3px 11px 0 0;
                min-width: 200px;
            }

        </style>
    </head>

    <body id="body">


        <div data-role="page" id="loginPage">
            <div data-role="header" >
                <h1>UD chat</h1>
            </div>

            <div data-role="content">
                <p>
                    <input type="text" id="loginI" value="conan@cd.ef"/>
                    <input type="password" id="passwordI" value="123"/>
                    <button onclick="login($('#loginI').val(), $('#passwordI').val());">Login</button>
                    <span id="connectionON">Status...</span>                    
                </p>
            </div>

            <div data-role="footer">
                <h4>PAGE FOOTER</h4>
            </div>
        </div>





        <div data-role="page" id="mainPage">
            <div data-role="header">
                <h1 id="usernameT">Chat window</h1>  
                <button onclick="logout();">Logout</button>
            </div>

            <div data-role="content">
                <div data-role="collapsible-set">
                    <div data-role="collapsible">
                        <h2>Friends</h2>
                        <ul data-role="listview" id="friendListT">
                            <li class="ui-li ui-li-static ui-btn-up-c">test :messafe</li>
                        </ul>
                    </div>
                    <div data-role="collapsible">
                        <h2>Groups</h2>
                        <ul data-role="listview" id="groupListT">
                            <li class="ui-li ui-li-static ui-btn-up-c">test :messafe</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

        <div data-role="page" id="chatPageTemplate">
            <div data-role="header" data-position="fixed">
                <h1 id="usernameT">Chat window</h1>  
                <button onclick="onGoToMainPage();">Back</button>
                <a href="#right-panel" data-icon="bars" data-iconpos="notext" data-shadow="false" data-iconshadow="false">Menu</a>
            </div>

            <div data-role="content">
                <ul data-role="listview" id="chatHistory">                        
                </ul>
                <!--<div id="chat_input">
                    <div class="block-button-send"><button onclick="sendPrivateMessage($('#inputPrivateMessage').val());">send</button></div>
                    <div class="block-input-send"><input type="text" id="inputPrivateMessage"/></div>
                </div>-->
            </div>

            <div data-role="panel" id="right-panel" data-display="overlay" data-position="right" data-theme="c">
                <ul data-role="listview" data-theme="d" data-icon="false">
                    <li data-icon="delete"><a href="#" data-rel="close"></a></li>
                    <li><a href="#">Close conversation</a></li>                 
                </ul>
            </div><!-- /panel -->

            <div data-role="footer" data-position="fixed">
                <div class="block-input-send"><input type="text" id="inputPrivateMessage"/></div>
                <div class="block-button-send"><button onclick="sendPrivateMessage($('#inputPrivateMessage').val());">send</button></div>
            </div>
        </div>





        <div data-role="page" id="chatPage">
            <div data-role="header">
                <h1>Chat window</h1>  
                <button onclick="logout();">Logout</button>
            </div>

            <div data-role="content">
                <ul data-role="listview" id="messageArray" data-theme="e">
                    <li class="ui-li ui-li-static ui-btn-up-c">test :messafe</li>
                </ul>
                <p>
                    <input type="text" id="input"/>




                    <button onclick="setStatus('CHAT_STATUS_AWAY');">Change status AWAY</button>
                    <button onclick="setStatus('CHAT_STATUS_DND');">Change status DND</button>
                    <button onclick="setStatus('CHAT_STATUS_BUSY');">Change status BUSY</button>
                    <button onclick="setStatus('CHAT_STATUS_AVAILABLE');">Change status AVAIL</button>
                    <button onclick="openPrivateChat(8);">Open chat</button>
                    <button onclick="closePrivateChat(8);">Close chat</button>

                    <button onclick="openGroupChat('test G1');">Open group</button>
                    <button onclick="closeGroupChat(7551);">Close group 7551</button>
                    <button onclick="addUserToGroup(8, 4194);">Add user 8 to group 4194</button>

                    <button onclick="leaveConversation(3751);">Leave conver 3751</button>

                    <button onclick="sendGroupMessage(4194, 'test message from web to group');">send mess to 4194</button>


                </p>

            </div>
        </div>

    </body>
</html>